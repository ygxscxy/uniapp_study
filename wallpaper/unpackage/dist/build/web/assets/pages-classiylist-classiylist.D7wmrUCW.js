import{s as a,J as s,u as e,C as l,K as t,L as i,v as u,g as o,w as r,p as d,o as c,q as p,j as v,x as n,y as g,F as m,i as f,k as y,G as _}from"./index-Dun_VNWR.js";import{_ as w}from"./uni-load-more.BoulyjsU.js";import{d as b,b as h,c as x,o as j,a as L,r as z}from"./index.BjfZrZzs.js";import{a as N}from"./userinfo.DEEIicQb.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";async function k({classid:a,pageNum:s=1,pageSize:e=12}){return(await b({url:"/wallList",data:{classid:a,pageNum:s,pageSize:e}})).data}const C=S({__name:"classiylist",setup(b){const S=a(""),C=a([]),q=a(1),F=a(!0),G=a(""),I=a("");return h((a=>{S.value=a.classid,s({title:a.title}),I.value=null==a?void 0:a.type,G.value=a.title})),e((async()=>{let a;a=I.value?await N({type:I.value}):await k({classid:S.value,pageNum:q.value,pageSize:12}),C.value=a.data,l("storageClassifyList",C.value),a.data.length<12&&(F.value=!1)})),x((async()=>{let a;q.value++,a=I.value?await N({type:I.value,pageNum:q.value,pageSize:12}):await k({classid:S.value,pageNum:q.value,pageSize:12}),a.data.length<12?F.value=!1:(C.value.push(...a.data),l("storageClassifyList",C.value))})),t((()=>{i("storageClassifyList")})),j((a=>({path:"/pages/classiylist/classiylist?classid="+S.value+"&title="+G.value,title:"dbb壁纸分类列表"}))),L((()=>({title:"dbb壁纸分类列表",imageUrl:"/static/images/xxmLogo.png",query:"classid="+S.value+"&title="+G.value}))),(a,s)=>{const e=z(u("uni-load-more"),w),l=d,t=y,i=_;return c(),o(l,{class:"classlist"},{default:r((()=>[!C.value.length&&F.value?(c(),o(l,{key:0,class:"loading-layout"},{default:r((()=>[p(e,{status:"loading"})])),_:1})):v("",!0),p(l,{class:"content"},{default:r((()=>[(c(!0),n(m,null,g(C.value,(a=>(c(),o(i,{url:"/pages/preview/preview?id="+a._id+"&title="+G.value,class:"item",key:a._id},{default:r((()=>[p(t,{src:a.smallPicurl,mode:"aspectFill"},null,8,["src"])])),_:2},1032,["url"])))),128))])),_:1}),F.value?v("",!0):(c(),o(l,{key:1,class:"tip"},{default:r((()=>[f(" 没有更多数据了~ ")])),_:1})),p(l,{class:"safe-area-inset-bottom"})])),_:1})}}},[["__scopeId","data-v-15dce95f"]]);export{C as default};
